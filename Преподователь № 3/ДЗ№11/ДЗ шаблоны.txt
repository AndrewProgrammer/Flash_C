Сделать Array шаблонный и SmartPointer шаблонный